// This file was generated from a template. Edit it to match your keyboard.
// See https://zmk.dev/docs/development/hardware-integration/new-shield for more
// instructions.

#include "fata_morgana.dtsi"
#include "fata_morgana_left-pinctrl.dtsi"
#include <dt-bindings/input/input-event-codes.h>

/ {
    pmw3610_listener {
        compatible = "zmk,input-listener";
        device = <&pmw3610>;
    };
};

&kscan {
    // Column GPIO pins for the left side matrix
    col-gpios
        = <&gpio0 8 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>   // C1 - Orange -> 12 (P0.08 - HS)
        , <&gpio0 6 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>   // C2 - White -> 11 (P0.06 - HS)
        , <&gpio0 27 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>  // C3 - Blue -> 10 (P0.27 - HS)
        , <&gpio0 26 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>  // C4 - Green -> 9 (P0.26 - HS)
        , <&gpio0 7 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>   // C5 - Yellow -> 6 (P0.07 - HS)
        ;
};

&spi1 {
    status = "okay";
    pinctrl-0 = <&spi1_default>;
    pinctrl-1 = <&spi1_sleep>;
    pinctrl-names = "default", "sleep";
    cs-gpios = <&gpio1 8 GPIO_ACTIVE_LOW>;

    pmw3610: pmw3610@0 {
        compatible = "pixart,pmw3610";
        reg = <0>;
        spi-max-frequency = <2000000>;
        irq-gpios = <&gpio0 10 (GPIO_ACTIVE_LOW | GPIO_PULL_UP)>;
        status = "okay";
    };
};
